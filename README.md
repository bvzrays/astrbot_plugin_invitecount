# 群邀请统计插件 (astrbot_plugin_invitecount)

一个用于 AstrBot/NapCat 机器人的**群聊邀请统计**插件。

可实时统计和随时查询每位成员的邀请、退群、踢人、有效邀请等多种入群数据，并提供查询、排行等指令，助你洞察群增长与成员贡献。

---

## 插件主要功能
- **/邀请查询 @成员** ：查询任意成员的入群方式、进群/退群、累计邀请、有效邀请等详细数据。
- **/我的邀请** ：查询自己邀请统计。
- **/邀请排行** ：按邀请人数排行，快速找到“群拉人王”。
- 数据实时监听群成员增减变更，包括邀请、扫码/自主入群、被踢、退群等行为；失效/有效邀请一目了然。
- 支持数据持久化，群数据重载不丢失。


## 安装与使用

1. **插件安装：**
   - 将本插件目录（包含 main.py、metadata.yaml 等全部文件）复制到 AstrBot 的 `data/plugins` 目录下，或通过 AstrBot WebUI 管理插件。
2. **重载插件/启动机器人**
   - 启动 AstrBot 后，在插件管理界面刷新即可生效。

---

## 指令说明
- `/邀请查询 @qq号`   查询某成员邀请明细，不加 @ 默认查自己
- `/我的邀请`         快速查自己邀请数据
- `/邀请排行`         查看群内邀请人数排名

> 支持通过 at 查询、或直接使用（如 `/邀请查询`），会自动匹配当前用户。


## 数据存储
- 插件自动在插件目录下保存 `invite_data.json` 用于邀请事件持久化，重载/重启后依然保留全部统计数据。
- 如需迁移或备份邀请/入群数据，直接复制该文件即可。

## 兼容性与依赖
- 兼容 AstrBot >= v3.4 / NapCat >= v4，基于 OneBot 协议事件监听实现。
- 无额外依赖，开箱即用。


## 贡献与建议
- 你可以根据需要自定义统计字段、导出数据、接入数据可视化等。
- 有优化建议、数据统计新想法，欢迎 issue 或 PR。

---

## 环境要求/注意事项
- 推荐数据持久化放到 data 目录下，避免插件更新重置（如需更高级别保障可调整数据保存路径）。
- 建议采用数据库/云存储等方式管理大型社群数据。
- 插件若依赖库变动，请补充填写 requirements.txt，方便 pip install -r 一键安装。


---

本插件遵循 MIT/GPL 等开源协议。
