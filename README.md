# 群邀请统计插件 · astrbot_plugin_invitecount


---

📢 **支持 AstrBot / NapCat 平台**

---

## 插件功能亮点

- **邀请统计新体验：** 群成员邀请、有效邀请、历史入群记录一目了然
- **美观图片渲染：** 查询/排行/奖励数据全部支持酷炫卡片图片输出，支持本地随机背景、圆角高光、通透模糊，视觉极佳！
- **支持@查询与QQ号查询** 任意/自己
- **排行支持有效人数、总人数、周/月周期快速切换**，TOP榜有超炫颜色、高亮分区
- **管理员重置功能：** 支持重置单个成员或全局邀请数据，便于数据管理
- **灵活数据作用域：** 支持按群、按用户、全局三种数据统计模式
- **WebUI 图形化配置** 一键开关美观渲染、调整奖励内容
- **数据永久保存**，兼容主数据目录及插件独立迁移
- **自定义本地图片背景**；多平台兼容

---

## 安装指南

1. **安装方式**：
   - 群组AstrBot/npcat插件目录下放入 `main.py`、`metadata.yaml`、`_conf_schema.json`、`requirements.txt`等全部文件夹。
2. **重载插件/启动机器人**
   - 插件管理界面一键刷新即可立即生效

---

## 指令说明

| 指令            | 作用描述                     |
|----------------|------------------------|
| `/邀请查询 @xx` | 查询指定成员邀请详情         |
| `/我的邀请`     | 查询本人邀请状态             |
| `/邀请排行`     | 查看群内邀请排行榜（支持总/有效/失效/周期切换） |
| `/邀请奖励`     | 展示当前邀请奖励规则         |
| `/邀请重置 [@成员\|QQ]` | 仅群管理员可用；重置指定成员的邀请数据（不指定默认自己） |
| `/全局邀请重置` | 仅群管理员可用；清空全局邀请数据 |

> 支持@、QQ直接查询命令：无需@时默认为自己
> 
> 重置功能说明：
> - 管理员可使用 `/邀请重置 @成员` 或 `/邀请重置 QQ号` 重置指定成员的邀请数据
> - 使用 `/全局邀请重置` 可清空所有邀请统计数据（请谨慎使用） 

---

## 图片风格/界面预览

> 推荐截图美观榜单&炫酷卡片插这里（效果见下 ↓）：
> 
> ![美观邀请榜UI预览](./doc/preview.png)

- 支持文件夹自定义背景（放于 `plugin-data/invitecount_images/`）
- 支持渐变色自动底图，永不出错
- 卡片内容圆角/阴影/分区高亮，完美适配群聊bot活动！

---

## 持久化 & 配置
- 所有数据自动保存于 `data/plugin-data/invitecount.json`，安全升级无忧
- WebUI 图形配置一键调整：图片美化开关/奖励内容/显示选项等
- 插件其他参数请于 WebUI 或 `_conf_schema.json` 管理

### 配置项说明
- **show_inviter**：是否显示邀请人群名片（默认：true）
- **only_stat_valid**：是否只统计有效邀请（没被踢和自己未退群，默认：false）
- **reward_message**：邀请奖励内容（支持多行文本和html）
- **enable_image_render**：是否将查询内容渲染为图片（默认：false）
- **storage_scope**：数据统计作用域（`group`=按群、`user`=按用户、`global`=全局，默认：`global`）

> **storage_scope 说明**：
> - `group`：按群独立统计，不同群的邀请数据互不影响
> - `user`：按用户独立统计，同一用户在不同群的数据分开统计
> - `global`：全局统一统计，所有群的邀请数据共享

---

## 环境依赖及说明
- 推荐 AstrBot >= 3.4 / NapCat >= 4.0
- 依赖`astrbot>=3.4`（requirements.txt 若为空请填写）
- 兼容 Windows/Linux 全环境

---

## 参与/贡献
- 欢迎PR增强功能、提出交流群管理或UI优化新想法！

---

插件遵循 MIT / GPL 开源协议自由使用。
